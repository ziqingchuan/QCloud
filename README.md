# 文件管理系统 (QCloud)

一个类似百度云盘的文件管理系统，支持文件展示、预览、搜索、下载等功能。纯前端实现，无需后端。

## 功能特性

- 自动读取 `public/files` 文件夹中的所有文件
- 文件列表展示（列表视图/网格视图）
- 文件搜索功能
- 双击文件预览内容（弹出层显示）
- 支持文本文件预览（TXT、MD、HTML、CSS、JS、JSON、CSV等）
- 支持图片文件预览（JPG、PNG、GIF、SVG、WEBP等）
- 支持PDF文件预览（浏览器内置查看器）
- 文本文件一键复制到剪贴板
- 单个文件下载
- 批量文件下载
- 响应式设计，支持移动端
- 专业的B端后台风格界面
- 优雅的顶部Toast提示
- 支持多种文件类型识别

## 技术栈

- React 19
- Vite
- CSS3

## 开始使用

### 安装依赖

```bash
npm install
```

### 启动开发服务器

```bash
npm run dev
```

系统会自动扫描 `public/files` 目录并生成文件列表，然后启动开发服务器。

访问 http://localhost:5173

### 构建生产版本

```bash
npm run build
```

构建前会自动生成文件列表，打包后的文件在 `dist` 目录。

## 文件管理

将需要展示的文件放置在 `public/files` 目录下，系统会自动读取并展示。

### 支持预览的文件类型

**PDF文件：**
- PDF（浏览器内置查看器）

**文本文件：**
- TXT, MD, HTML, CSS, JS, JSX, TS, TSX
- JSON, XML, CSV, LOG
- DOC, DOCX（作为文本预览）

**图片文件：**
- JPG, JPEG, PNG, GIF, SVG, WEBP, BMP

**其他文件：**
- ZIP, RAR, 7Z等压缩包
- 不支持预览，但可以下载

## 项目结构

```
├── public/
│   ├── files/              # 存放文件的目录
│   └── api/                # 自动生成的文件列表
│       └── files.json      # 文件元数据
├── src/
│   ├── components/         # 组件目录
│   │   ├── FileList.jsx   # 文件列表组件
│   │   ├── FileItem.jsx   # 文件项组件
│   │   ├── Toolbar.jsx    # 工具栏组件
│   │   ├── FileViewer.jsx # 文件预览组件（弹出层）
│   │   ├── Toast.jsx      # Toast提示组件
│   │   └── icons/         # SVG图标组件
│   ├── utils/             # 工具函数
│   │   └── fileUtils.js   # 文件处理工具
│   ├── styles/            # 样式文件
│   └── App.jsx            # 主应用组件
├── generate-file-list.js  # 文件列表生成脚本
└── vite.config.js         # Vite配置
```

## 使用说明

1. 将文件放入 `public/files` 文件夹
2. 运行 `npm run dev` 启动开发服务器（会自动生成文件列表）
3. 在浏览器中打开应用
4. 使用搜索框搜索文件
5. **单击文件**可选中，点击下载图标下载单个文件
6. **双击文件**或点击预览图标打开预览弹窗查看内容
7. 文本文件预览时，点击右上角复制按钮可复制内容到剪贴板
8. 选中多个文件后，点击"批量下载"按钮下载所有选中文件

## 特色功能

### 文件预览（双击打开）
- **PDF文件**：使用浏览器内置PDF查看器，支持缩放、翻页
- **文本文件**：使用代码编辑器风格显示，支持一键复制
- **图片文件**：居中显示，自适应大小
- **不支持预览**：显示提示信息，引导用户下载
- **弹出层设计**：半透明背景，点击外部关闭

### 复制功能
- 文本文件预览时，右上角显示复制按钮
- 点击复制按钮，内容自动复制到剪贴板
- 复制成功后图标变为绿色对勾，2秒后恢复

### Toast提示
- 下载成功：绿色边框，白色半透明背景
- 下载失败：红色边框，白色半透明背景
- 加载中：蓝色边框，白色半透明背景
- 自动2秒后消失

### 文件选择
- 单击选中文件，显示蓝色边框和对勾
- 双击打开预览
- 背景保持透明，不会变色

### 视图切换
- 列表视图：显示详细信息（名称、大小、修改日期、操作）
- 网格视图：卡片式展示，适合浏览图片

## 工作原理

系统使用 `generate-file-list.js` 脚本在构建前扫描 `public/files` 目录，生成包含文件元数据的 `files.json` 文件。这样可以避免Vite在打包时尝试解析非JavaScript文件导致的错误。

**开发模式：**
1. 运行 `npm run dev`
2. 自动执行 `generate-file-list.js` 扫描文件
3. 生成 `public/api/files.json`
4. 启动Vite开发服务器
5. 应用从 `files.json` 读取文件列表

**生产模式：**
1. 运行 `npm run build`
2. 自动执行 `generate-file-list.js` 扫描文件
3. 生成 `public/api/files.json`
4. Vite打包应用
5. `files.json` 和文件一起打包到 `dist` 目录

## 移动端适配

- 小屏幕下自动调整布局
- 预览弹窗全屏显示
- 按钮和文字大小自动调整
- 隐藏部分不必要的列信息

## 注意事项

- 纯前端实现，无需后端服务器
- 文件直接从 `public/files` 目录读取
- 每次添加或删除文件后，需要重新运行 `npm run dev` 或 `npm run build`
- 大文件预览可能需要较长加载时间
- 建议文件大小不超过10MB以获得最佳体验
- 批量下载会依次触发多个下载，浏览器可能会提示是否允许多个下载
- 文件名支持中文和特殊字符

## 部署

构建后的文件可以部署到任何静态文件服务器：

```bash
npm run build
```

将 `dist` 目录部署到：
- GitHub Pages
- Vercel
- Netlify
- 或任何支持静态文件的服务器
